import{j as e}from"./muiEmployees.D86U3fPa.js";import{r as S,u as L,C as k}from"./reactHookForm.BIi6FwHL.js";import{C as f,B as N,u as M,n as _}from"./index.CGtxRsZM.js";import{O as A,I as X,T as C,a as w,u as E,e as z,t as P,b as g,F as R,c as U,R as B,d as u,f as x}from"./muiSignUp.CiS4oUOF.js";import"./reactHashLink.BQUFUxCe.js";const I=({onImageChange:l})=>{const[r,t]=S.useState("Upload your photo"),s=n=>{const o=n.split("."),p=o[o.length-1].toLowerCase();return["jpg","jpeg","png"].includes(p)},m=n=>parseFloat((n.size/1048576).toFixed(2))<5,i=n=>{const o=n.target.files?n.target.files[0]:null;o?s(o.name)?m(o)?(t(o.name),l(o)):t("file is not an image"):t("file is too big"):t("Upload your photo")};return e.jsxs(f,{component:"div",className:"fileLoader__wrapper",children:[e.jsx(A,{sx:{display:"none"},id:"file-upload",type:"file",onChange:i}),e.jsxs(X,{htmlFor:"file-upload",sx:{display:"flex",width:"100%"},children:[e.jsx(N,{variant:"outlined",component:"span",sx:{minWidth:"auto",display:"flex"},children:"Upload"}),e.jsx(C,{variant:"main",sx:{padding:"14px 16px",cursor:"text"},children:r})]})]})};var T=["component","mask","replacement","showMask","separate","track","modify","onMask"];function O(l,r){var t=l.component,s=l.mask,m=l.replacement,i=l.showMask,n=l.separate,o=l.track,p=l.modify,h=l.onMask,y=w(l,T),d=E({mask:s,replacement:m,showMask:i,separate:n,track:o,modify:p,onMask:h}),c=z(d,r);return e.jsx(t||"input",P({ref:c},y))}S.forwardRef(O);const q=()=>{var d,c,j,b,v,F;const{employeesList:l,addEmployees:r,showPopup:t}=M(),{register:s,handleSubmit:m,control:i,reset:n,formState:{errors:o,isValid:p}}=L({mode:"onChange"}),h=a=>{console.log(a.employeeAvatar),r({..._,id:l.length+1,image:a.employeeAvatar!==""?URL.createObjectURL(a.employeeAvatar):"",firstName:a.employeeName,lastName:a.employeeName,email:a.employeeEmail,phone:a.employeePhone,company:{..._.company,title:a.employeePosition}}),n(),t()},y=E({mask:"+38 (___) ___-__-__",replacement:"_"});return e.jsxs(f,{component:"section",className:"sign-up__section",id:"Sign up",children:[e.jsx(C,{variant:"h2",sx:{marginBottom:"50px"},children:"Sign Up"}),e.jsxs(f,{component:"form",className:"sign-up__form",onSubmit:m(h),children:[e.jsx(g,{id:"employeeName",label:"Your name",variant:"outlined",color:"primary",...s("employeeName",{required:!0,minLength:{value:2,message:"Minimum length should be 2"},maxLength:{value:60,message:"Maximum length should be 60"},validate:{correctFormat:a=>/^[a-zA-Z]+$/.test(a)||"Only letters"}}),error:!!o.employeeName,helperText:((c=(d=o==null?void 0:o.employeeName)==null?void 0:d.message)==null?void 0:c.toString())||""}),e.jsx(g,{id:"employeeEmail",label:"Email",variant:"outlined",color:"primary",...s("employeeEmail",{validate:{correctFormat:a=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)||"Invalid email address"}}),error:!!o.employeeEmail,helperText:((b=(j=o==null?void 0:o.employeeEmail)==null?void 0:j.message)==null?void 0:b.toString())||""}),e.jsx(g,{error:!!o.employeePhone,inputRef:y,id:"employeePhone",label:"Phone",variant:"outlined",color:"primary",...s("employeePhone",{validate:{correctFormat:a=>/^\+38 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(a)}}),helperText:((F=(v=o==null?void 0:o.employeePhone)==null?void 0:v.message)==null?void 0:F.toString())||"+38 (XXX) XXX - XX - XX"}),e.jsxs(R,{children:[e.jsx(U,{id:"radio-buttons-group-label",children:"Select your position"}),e.jsx(k,{name:"employeePosition",control:i,defaultValue:"Frontend developer",render:({field:a})=>e.jsxs(B,{"aria-labelledby":"radio-buttons-group-label",...a,children:[e.jsx(u,{value:"Frontend developer",control:e.jsx(x,{}),label:"Frontend developer"}),e.jsx(u,{value:"Backend developer",control:e.jsx(x,{}),label:"Backend developer"}),e.jsx(u,{value:"Designer",control:e.jsx(x,{}),label:"Designer"}),e.jsx(u,{value:"QA",control:e.jsx(x,{}),label:"QA"})]})})]}),e.jsx(k,{name:"employeeAvatar",control:i,defaultValue:"",render:({field:{onChange:a}})=>e.jsx(I,{onImageChange:a})}),e.jsx(N,{variant:"contained",sx:{margin:"auto",display:"block"},type:"submit",disabled:!p,children:"Sign up"})]})]})};export{q as default};
