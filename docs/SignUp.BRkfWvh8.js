import{j as e}from"./muiPopUp.Dnrzv5zN.js";import{r as S,u as L,C as k}from"./reactHookForm.BIi6FwHL.js";import{C as f,B as N,T as C}from"./muiCommon.q-rtFm_n.js";import{O as M,I as A,a as X,u as E,e as w,t as z,T as g,F as P,b as R,R as U,c as u,d as x}from"./muiSignUp.DNiGpa70.js";import{u as B,n as _}from"./index.D1q1WmaL.js";import"./reactHashLink.BQUFUxCe.js";import"./muiEmployees.DZ8f-otS.js";import"./muiHeader.zbWg05PI.js";const I=({onImageChange:l})=>{const[r,n]=S.useState("Upload your photo"),s=t=>{const o=t.split("."),p=o[o.length-1].toLowerCase();return["jpg","jpeg","png"].includes(p)},m=t=>parseFloat((t.size/1048576).toFixed(2))<5,i=t=>{const o=t.target.files?t.target.files[0]:null;o?s(o.name)?m(o)?(n(o.name),l(o)):n("file is not an image"):n("file is too big"):n("Upload your photo")};return e.jsxs(f,{component:"div",className:"fileLoader__wrapper",children:[e.jsx(M,{sx:{display:"none"},id:"file-upload",type:"file",onChange:i}),e.jsxs(A,{htmlFor:"file-upload",sx:{display:"flex",width:"100%"},children:[e.jsx(N,{variant:"outlined",component:"span",sx:{minWidth:"auto",display:"flex"},children:"Upload"}),e.jsx(C,{variant:"main",sx:{padding:"14px 16px",cursor:"text"},children:r})]})]})};var T=["component","mask","replacement","showMask","separate","track","modify","onMask"];function O(l,r){var n=l.component,s=l.mask,m=l.replacement,i=l.showMask,t=l.separate,o=l.track,p=l.modify,h=l.onMask,y=X(l,T),d=E({mask:s,replacement:m,showMask:i,separate:t,track:o,modify:p,onMask:h}),c=w(d,r);return e.jsx(n||"input",z({ref:c},y))}S.forwardRef(O);const H=()=>{var d,c,j,b,v,F;const{employeesList:l,addEmployees:r,showPopup:n}=B(),{register:s,handleSubmit:m,control:i,reset:t,formState:{errors:o,isValid:p}}=L({mode:"onChange"}),h=a=>{console.log(a.employeeAvatar),r({..._,id:l.length+1,image:a.employeeAvatar!==""?URL.createObjectURL(a.employeeAvatar):"",firstName:a.employeeName,lastName:a.employeeName,email:a.employeeEmail,phone:a.employeePhone,company:{..._.company,title:a.employeePosition}}),t(),n()},y=E({mask:"+38 (___) ___-__-__",replacement:"_"});return e.jsxs(f,{component:"section",className:"sign-up__section",id:"Sign up",children:[e.jsx(C,{variant:"h2",sx:{marginBottom:"50px"},children:"Sign Up"}),e.jsxs(f,{component:"form",className:"sign-up__form",onSubmit:m(h),children:[e.jsx(g,{id:"employeeName",label:"Your name",variant:"outlined",color:"primary",...s("employeeName",{required:!0,minLength:{value:2,message:"Minimum length should be 2"},maxLength:{value:60,message:"Maximum length should be 60"},validate:{correctFormat:a=>/^[a-zA-Z]+$/.test(a)||"Only letters"}}),error:!!o.employeeName,helperText:((c=(d=o==null?void 0:o.employeeName)==null?void 0:d.message)==null?void 0:c.toString())||""}),e.jsx(g,{id:"employeeEmail",label:"Email",variant:"outlined",color:"primary",...s("employeeEmail",{validate:{correctFormat:a=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)||"Invalid email address"}}),error:!!o.employeeEmail,helperText:((b=(j=o==null?void 0:o.employeeEmail)==null?void 0:j.message)==null?void 0:b.toString())||""}),e.jsx(g,{error:!!o.employeePhone,inputRef:y,id:"employeePhone",label:"Phone",variant:"outlined",color:"primary",...s("employeePhone",{validate:{correctFormat:a=>/^\+38 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(a)}}),helperText:((F=(v=o==null?void 0:o.employeePhone)==null?void 0:v.message)==null?void 0:F.toString())||"+38 (XXX) XXX - XX - XX"}),e.jsxs(P,{children:[e.jsx(R,{id:"radio-buttons-group-label",children:"Select your position"}),e.jsx(k,{name:"employeePosition",control:i,defaultValue:"Frontend developer",render:({field:a})=>e.jsxs(U,{"aria-labelledby":"radio-buttons-group-label",...a,children:[e.jsx(u,{value:"Frontend developer",control:e.jsx(x,{}),label:"Frontend developer"}),e.jsx(u,{value:"Backend developer",control:e.jsx(x,{}),label:"Backend developer"}),e.jsx(u,{value:"Designer",control:e.jsx(x,{}),label:"Designer"}),e.jsx(u,{value:"QA",control:e.jsx(x,{}),label:"QA"})]})})]}),e.jsx(k,{name:"employeeAvatar",control:i,defaultValue:"",render:({field:{onChange:a}})=>e.jsx(I,{onImageChange:a})}),e.jsx(N,{variant:"contained",sx:{margin:"auto",display:"block"},type:"submit",disabled:!p,children:"Sign up"})]})]})};export{H as default};
